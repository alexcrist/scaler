(this.webpackJsonpscaler=this.webpackJsonpscaler||[]).push([[0],{106:function(e,t,a){e.exports={dropdown:"DropdownMenu_dropdown__2qjGn",hidden:"DropdownMenu_hidden__OkTpS",option:"DropdownMenu_option__1Eb3B"}},107:function(e,t,a){e.exports={container:"Load_container__2xm-W",load:"Load_load__176E_",icon:"Load_icon__1G4ds"}},109:function(e,t,a){e.exports={moreContainer:"More_moreContainer__3myel",more:"More_more__2Crn9",moreIcon:"More_moreIcon__l1fRm"}},110:function(e,t,a){e.exports={play:"Play_play__2x_Gd",playIcon:"Play_playIcon__IwdyU",playText:"Play_playText__1skLF"}},133:function(e,t,a){e.exports={createTrack:"AddTrack_createTrack__1dZTK",createTrackText:"AddTrack_createTrackText__3wNni"}},134:function(e,t,a){e.exports={container:"Chart_container__1PIOn",cap:"Chart_cap__21rfP"}},137:function(e,t,a){e.exports={save:"Save_save__3A0OR",saveIcon:"Save_saveIcon__2J_5P"}},194:function(e,t,a){e.exports={arm:"TimelineArm_arm__2cLiz"}},215:function(e,t){},25:function(e,t,a){e.exports={container:"TrackOptions_container__2E_dx",collapsed:"TrackOptions_collapsed__X5vja",header:"TrackOptions_header__3Lfwo",icons:"TrackOptions_icons__33YYK",icon:"TrackOptions_icon__3jQrz",isMuted:"TrackOptions_isMuted__4aVJB",muteIcon:"TrackOptions_muteIcon__175TR",trashIcon:"TrackOptions_trashIcon__30wpV",title:"TrackOptions_title__1ue4w",label:"TrackOptions_label__1sLEb",input:"TrackOptions_input__3reUO",inputError:"TrackOptions_inputError__L1BNH"}},30:function(e,t,a){e.exports={container:"LoopOptions_container__1J57F",inputGroup:"LoopOptions_inputGroup__18R54",label:"LoopOptions_label__2B8FD",input:"LoopOptions_input__19Sav",scaleInputGroup:"LoopOptions_scaleInputGroup__3-xi8",scaleSelects:"LoopOptions_scaleSelects__2-VIS"}},358:function(e,t,a){},359:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(75),c=a.n(o),s=a(12),i=a(31),l=a.n(i),u=a(11),d=["C0","Db0","D0","Eb0","E0","F0","Gb0","G0","Ab0","A0","Bb0","B0","C1","Db1","D1","Eb1","E1","F1","Gb1","G1","Ab1","A1","Bb1","B1","C2","Db2","D2","Eb2","E2","F2","Gb2","G2","Ab2","A2","Bb2","B2","C3","Db3","D3","Eb3","E3","F3","Gb3","G3","Ab3","A3","Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","G4","Ab4","A4","Bb4","B4","C5","Db5","D5","Eb5","E5","F5","Gb5","G5","Ab5","A5","Bb5","B5","C6","Db6","D6","Eb6","E6","F6","Gb6","G6","Ab6","A6","Bb6","B6","C7","Db7","D7","Eb7","E7","F7","Gb7","G7","Ab7","A7","Bb7","B7","C8","Db8","D8","Eb8","E8","F8","Gb8","G8","Ab8","A8","Bb8","B8"],b=[16.35,17.32,18.35,19.45,20.6,21.83,23.12,24.5,25.96,27.5,29.14,30.87,32.7,34.65,36.71,38.89,41.2,43.65,46.25,49,51.91,55,58.27,61.74,65.41,69.3,73.42,77.78,82.41,87.31,92.5,98,103.83,110,116.54,123.47,130.81,138.59,146.83,155.56,164.81,174.61,185,196,207.65,220,233.08,246.94,261.63,277.18,293.66,311.13,329.63,349.23,369.99,392,415.3,440,466.16,493.88,523.25,554.37,587.33,622.25,659.25,698.46,739.99,783.99,830.61,880,932.33,987.77,1046.5,1108.73,1174.66,1244.51,1318.51,1396.91,1479.98,1567.98,1661.22,1760,1864.66,1975.53,2093,2217.46,2349.32,2489.02,2637.02,2793.83,2959.96,3135.96,3322.44,3520,3729.31,3951.07,4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13];if(d.length!==b.length)throw Error("# notes !== # freqs");for(var f={},p=0;p<d.length;p++)f[d[p]]=b[p];for(var j=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],m=[{name:"Major",steps:[2,2,1,2,2,2,1]},{name:"Minor",steps:[2,1,2,2,1,2,2]},{name:"Major (pentatonic)",steps:[2,2,3,2,3]},{name:"Minor (pentatonic)",steps:[3,2,2,3,2]}],v=function(e,t){var a=j.indexOf(e),n=t.map((function(e){return a=(a+e)%j.length,j[a]}));return n.unshift(n.pop()),n},h=[],O=0,x=j;O<x.length;O++){var _,k=x[O],N=Object(u.a)(m);try{var y=function(){var e=_.value,t=v(k,e.steps),a=d.filter((function(e){var a=e.substring(0,e.length-1);return t.includes(a)}));h.push({name:"".concat(k," ").concat(e.name),pitches:t,notes:a})};for(N.s();!(_=N.n()).done;)y()}catch(lt){N.e(lt)}finally{N.f()}}var g,w=h=l.a.sortBy(h,[function(e){return e.name.includes("pentatonic")?1:0},function(e){return j.indexOf(e.pitches[0])}]),C=new Float32Array([0,.8,1,.3,0].map((function(e){return.05*e}))),T=new(window.AudioContext||window.webkitAudioContext),B=[],E=function e(t,a,n,r){var o=1/(4*n)*60,c=o*r,s=A(),i=s.beatIndex,l=s.offsetTime,u=T.currentTime+l-o*i;I();for(var d=t.length,b=0;b<4;b++)for(var f=0;f<d;f++)for(var p=0;p<r;p++)if(!(0===b&&p<i)){var j=S(b,p,a[f][p],t[f],u,o,c);B.push(j)}var m=M();g=m;var v=1e3*(B.length/d*o+l);setTimeout((function(){g===m&&e(t,a,n,r)}),v)},I=function(){G(),B=[],g=null},M=function(){return Date.now()},D=function(e){return"number"===typeof e&&!isNaN(e)&&e>0},S=function(e,t,a,n,r,o,c){var s=f[a],i=n.isMuted,l=n.disabledBeats.includes(t),u=!(i||l),d=n.noteDuration/1e3,b=r+e*c+t*o,p=D(s)&&D(d),j=null,m=null;return u&&p&&((j=T.createGain()).connect(T.destination),j.gain.setValueCurveAtTime(C,b,d),(m=T.createOscillator()).connect(j),m.frequency.setValueAtTime(s,0),m.start(b),m.stop(b+d)),{beatIndex:t,startTime:b,volumeNode:j,oscillatorNode:m}},A=function(){var e,t=T.currentTime,a=Object(u.a)(B);try{for(a.s();!(e=a.n()).done;){var n=e.value,r=n.startTime,o=n.beatIndex;if(r>t)return{beatIndex:o,offsetTime:r-t}}}catch(lt){a.e(lt)}finally{a.f()}return{beatIndex:0,offsetTime:0}},G=function(){var e,t=T.currentTime,a=Object(u.a)(B);try{for(a.s();!(e=a.n()).done;){var n=e.value,r=n.startTime,o=n.volumeNode;r>t&&o&&o.disconnect()}}catch(lt){a.e(lt)}finally{a.f()}},L=a(367),R=function(e,t){if("y="!==(e=e.replace(/\s+/g,"")).substring(0,2))throw Error("Invalid formula: "+e);e=e.substring(2);var a,n=[],r=Object(u.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;try{var c=Object(L.a)(e,{x:o});n.push(c)}catch(d){throw Error("Formula evaluation error: "+e)}}}catch(lt){r.e(lt)}finally{r.f()}var s=!1;n=n.map((function(e){return e>30?(s=!0,30):e<-30?(s=!0,-30):e}));var i,l=Object(u.a)(n);try{for(l.s();!(i=l.n()).done;){if("number"!==typeof i.value)throw console.error("Error in y-values:",n),Error("Formula produced invalid values: "+e)}}catch(lt){l.e(lt)}finally{l.f()}return{yValues:n=n.map((function(e){return isNaN(e)?0:e})),wasCapped:s,cap:30}},F=["#8338ec","#ff006e","#3a86ff","#fb5607","#ffbe0b"],P="cc",V="#666666",J=a(132),U=a.n(J),q=function(e){var t=JSON.stringify(e);return U.a.compressToEncodedURIComponent(t)},H=function(e){var t=U.a.decompressFromEncodedURIComponent(e);return JSON.parse(t)},K="saves",W={bpm:60,numBeats:16,noteRange:14,scale:w[3],lowNote:"E3",tracks:[{color:F[0],formula:"y = min(sin(x), cos(x))",noteDuration:20,disabledBeats:[1,4,7,9,10,15],isMuted:!1},{color:F[1],formula:"y = (1 / (x + 0.5)) * cos(4x) - 2",noteDuration:90,disabledBeats:[0,2,5,6,10,12,13],isMuted:!1},{color:F[2],formula:"y = 0",noteDuration:60,disabledBeats:[0,6,9,13],isMuted:!1}]},Y=function(){var e=window.location.search,t=new URLSearchParams(e).get("d");return t?H(t):(t=function(){var e=localStorage.getItem("d");return null===e?null:H(e)}())||W},z=a(20),Q=a(133),X=a.n(Q),Z=a(2),$=function(e){var t=e.tracks,a=e.setTracks;return Object(Z.jsx)("div",{onClick:function(){var e=t[t.length-1].color,n=(F.indexOf(e)+1)%F.length,r={color:F[n],formula:"y = 0",noteDuration:100,disabledBeats:[],isMuted:!1};a([].concat(Object(z.a)(t),[r]))},className:X.a.createTrack,style:{borderColor:V,backgroundColor:"#666666cc"},children:Object(Z.jsx)("div",{className:X.a.createTrackText})})},ee=a(175),te=a(366),ae=a(369),ne=a(196),re=a(88),oe=a(190),ce=a(134),se=a.n(ce),ie=function(e){for(var t=e.tracks,a=e.numBeats,n=e.notes,r=[],o=20*a,c=0;c<o+1;c++)r.push(c*(2*Math.PI)/o);for(var s=!1,i=0,u=t.map((function(e){try{var t=R(e.formula,r);return s=s||t.wasCapped,i=t.cap,t.yValues}catch(a){return[]}})),d=r.map((function(e,t){return{x:e,i:t}})),b=0;b<u.length;b++)for(var f="Track ".concat(b+1),p=u[b],j=0;j<p.length;j++){var m=p[j];d[j][f]=m}for(var v=[],h=0;h<a+1;h++)v.push(Object(Z.jsx)(ee.a,{x:h/a*o,strokeDasharray:"3 3"},"x-line-".concat(h)));for(var O=[],x=Math.floor(l()(u).flatten().min()),_=Math.ceil(l()(u).flatten().max()),k=_-x,N=Math.max(1,Math.pow(10,Math.floor(Math.log10(k-1)))),y=x;y<=_;y+=N)O.push(Object(Z.jsx)(ee.a,{y:y,strokeDasharray:"3 3"},"y-line-".concat(y)));return Object(Z.jsxs)("div",{className:se.a.container,children:[Object(Z.jsx)(te.a,{width:"100%",height:300,children:Object(Z.jsxs)(ae.a,{data:d,children:[v,O,t.map((function(e,t){return Object(Z.jsx)(ne.a,{type:"monotone",dataKey:"Track ".concat(t+1),stroke:e.color,opacity:e.isMuted?.4:1,dot:!1,strokeWidth:2},"line-".concat(t))})),Object(Z.jsx)(re.a,{formatter:function(e,t,a){var r=a.dataKey,o=a.payload.i,c=Number(r[r.length-1])-1,s=Math.round(o/20);return n[c][s]},labelFormatter:function(e){return Math.floor(e/20)+1}}),Object(Z.jsx)(oe.a,{domain:["dataMin","dataMax"],hide:!0})]})}),s?Object(Z.jsxs)("div",{className:se.a.cap,children:["* y-values capped at \xb1",i]}):null]})},le=a(36),ue=a(86),de=a.n(ue),be=function(e){var t=e.numBeats,a=e.track,n=e.setTrack;if(!a)return null;for(var r=a.color,o={backgroundColor:r+P,borderColor:r},c=[],s=function(e){var t=[de.a.button];a.disabledBeats.includes(e)&&t.push(de.a.disabled),c.push(Object(Z.jsx)("div",{onClick:function(){for(var t=!0,r=0;r<a.disabledBeats.length;r++)e===a.disabledBeats[r]&&(a.disabledBeats.splice(r,1),t=!1);t&&a.disabledBeats.push(e),n(Object(le.a)({},a))},style:o,className:t.join(" "),children:e+1},e))},i=0;i<t;i++)s(i);var l=[de.a.buttons];return a.isMuted&&l.push(de.a.muted),Object(Z.jsx)("div",{className:l.join(" "),children:c})},fe=a(87),pe=a.n(fe),je=function(){return Object(Z.jsxs)("div",{className:pe.a.container,children:[Object(Z.jsx)("div",{className:pe.a.text,children:"SCALER"}),Object(Z.jsx)("div",{className:pe.a.line}),Object(Z.jsx)("a",{className:pe.a.link,href:"https://github.com/alexcrist/scaler",target:"_",children:"see the code"})]})},me=a(32),ve=a(191),he=a(106),Oe=a.n(he),xe=function(e){var t=e.containerRef,a=e.isVisible,n=e.setIsVisible,r=e.options;Object(ve.useEffect)((function(){var e=function(e){t.current&&!t.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,n]);var o=[Oe.a.dropdown];a||o.push(Oe.a.hidden);var c=function(e){return function(){n(!1),e.onClick()}};return Object(Z.jsx)("div",{className:o.join(" "),children:r.map((function(e,t){return Object(Z.jsx)("div",{className:Oe.a.option,onClick:c(e),children:e.label},t)}))})},_e=a(107),ke=a.n(_e),Ne=function(e){var t=e.setBpm,a=e.setNumBeats,r=e.setNoteRange,o=e.setScale,c=e.setLowNote,i=e.setTracks,u=Object(n.useRef)(null),d=Object(n.useState)(!1),b=Object(s.a)(d,2),f=b[0],p=b[1],j=Object(n.useState)([]),m=Object(s.a)(j,2),v=m[0],h=m[1];return Object(Z.jsxs)("div",{ref:u,className:ke.a.container,children:[Object(Z.jsx)("div",{title:"Load",onClick:function(){p(!f);var e=function(){var e=localStorage.getItem(K);if(null===e)return[];e=H(e);for(var t=[],a=0,n=Object.keys(e);a<n.length;a++){var r=n[a],o=e[r],c=o.data,s=o.date;t.push({name:r,data:c,date:s})}return l()(t).sortBy("date").reverse().value()}().map((function(e){return{label:e.name,onClick:function(){var n=e.data,s=n.bpm,l=n.numBeats,u=n.noteRange,d=n.scale,b=n.lowNote,f=n.tracks;t(s),a(l),r(u),o(d),c(b),i(f)}}}));0===e.length&&(e=[{label:"No saves",onClick:function(){}}]),h(e)},className:ke.a.load,style:{borderColor:V,backgroundColor:"#666666cc"},children:Object(Z.jsx)("div",{className:ke.a.icon,children:Object(Z.jsx)(me.b,{})})}),Object(Z.jsx)(xe,{containerRef:u,isVisible:f,setIsVisible:p,options:v})]})},ye=a(192),ge=a(30),we=a.n(ge),Ce=function(e){var t={borderColor:V};return Object(Z.jsxs)("div",{className:we.a.inputGroup,children:[Object(Z.jsx)("label",{className:we.a.label,children:e.label}),Object(Z.jsx)("input",Object(le.a)({className:we.a.input,style:t},e))]})},Te=function(e){var t=e.scale,a=e.setScale,n=e.lowNote,r=e.setLowNote,o=t.name.split(" "),c=Object(ye.a)(o),s=c[0],i=c.slice(1).join(" "),l=m.map((function(e){return e.name})),u=j.indexOf(s),d=l.indexOf(i),b=function(e,o){var c="".concat(e," ").concat(o),s=w.filter((function(e){return e.name===c}))[0];console.log(c);var i=t.notes.indexOf(n),l=s.notes[i];r(l),a(s)};return Object(Z.jsxs)("div",{className:"".concat(we.a.inputGroup," ").concat(we.a.scaleInputGroup),children:[Object(Z.jsx)("label",{className:we.a.label,children:"Scale"}),Object(Z.jsxs)("div",{className:we.a.scaleSelects,children:[Object(Z.jsx)("select",{style:{borderColor:V},className:we.a.input,onChange:function(e){return b(j[e.target.value],i)},value:u,children:j.map((function(e,t){return Object(Z.jsx)("option",{value:t,children:e},t)}))}),Object(Z.jsx)("select",{style:{borderColor:V},className:we.a.input,onChange:function(e){return b(s,l[e.target.value])},value:d,children:l.map((function(e,t){return Object(Z.jsx)("option",{value:t,children:e},t)}))})]})]})},Be=function(e){var t=e.scale,a=e.lowNote,n=e.setLowNote,r=t.notes.indexOf(a);return Object(Z.jsxs)("div",{className:we.a.inputGroup,children:[Object(Z.jsx)("label",{className:we.a.label,children:"Low note"}),Object(Z.jsx)("select",{style:{borderColor:V},className:we.a.input,onChange:function(e){var a=t.notes[e.target.value];n(a)},value:r,children:t.notes.map((function(e,t){return Object(Z.jsx)("option",{value:t,children:e},t)}))})]})},Ee=function(e){var t=e.scale,a=e.lowNote,n=e.bpm,r=e.numBeats,o=e.noteRange,c=e.setScale,s=e.setLowNote,i=e.setBpm,l=e.setNumBeats,u=e.setNoteRange;return Object(Z.jsxs)("div",{className:we.a.container,style:{backgroundColor:"#666666cc",borderColor:V},children:[Object(Z.jsx)(Ce,{label:"Tempo (bpm)",type:"number",value:n,onChange:function(e){return i(Math.min(Number(e.target.value),999))}}),Object(Z.jsx)(Ce,{label:"Beats per measure",type:"number",value:r,onChange:function(e){return l(Math.min(Number(e.target.value),99))}}),Object(Z.jsx)(Ce,{label:"Pitch range",type:"number",value:o,onChange:function(e){return u(Math.min(Number(e.target.value),99))}}),Object(Z.jsx)(Be,{scale:t,lowNote:a,setLowNote:s}),Object(Z.jsx)(Te,{lowNote:a,setLowNote:s,scale:t,setScale:c})]})},Ie=a(108),Me=a.n(Ie),De=function(e){var t=e.bpm,a=e.tracks,n=e.notes;!function(e,t){var a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("scaler.mid",Se({bpm:t,tracks:a,notes:n}))},Se=function(e){for(var t=e.bpm,a=e.tracks,n=e.notes,r=1/(4*t)*60*1e3,o=[],c=0;c<a.length;c++){var s=a[c],i=s.noteDuration,l=s.disabledBeats,u=new Me.a.Track;u.setTempo(t);for(var d=0;d<n[c].length;d++){for(var b=n[c][d],f=l.includes(d),p=d*r,j=1/0,m=d+1;m<n[c].length;m++){if(b===n[c][m]){j=m*r-p-1;break}}var v=Math.min(i,j);if(!f){var h=new Me.a.NoteEvent({pitch:b,duration:"T"+Ae(v,t),startTick:Ae(p,t)});u.addEvent(h)}}o.push(u)}return new Me.a.Writer(o).dataUri()},Ae=function(e,t){var a=Math.round(6e7/t),n=e/1e3;return Math.round(n/(1e-6*a/128))},Ge=a(28),Le=a.n(Ge),Re=a(193),Fe=function(){var e=Object(Re.a)(Le.a.mark((function e(t){var a,n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=q(t),n=window.location.origin+window.location.pathname+"?d="+a,e.prev=2,e.next=5,navigator.clipboard.writeText(n);case 5:alert("A link to your work has been copied to your clipboard."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),prompt("Save the following URL to access your work:",n);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),Pe=a(109),Ve=a.n(Pe),Je=function(e){var t=e.saveData,a=e.notes,r=Object(n.useRef)(null),o=Object(n.useState)(!1),c=Object(s.a)(o,2),i=c[0],l=c[1],u=[{onClick:function(){return Fe(t)},label:"Share"},{onClick:function(){return De(Object(le.a)(Object(le.a)({},t),{},{notes:a}))},label:"Export to MIDI"}];return Object(Z.jsxs)("div",{ref:r,className:Ve.a.moreContainer,children:[Object(Z.jsx)("div",{title:"More",onClick:function(){return l(!i)},className:Ve.a.more,style:{borderColor:V,backgroundColor:"#666666cc"},children:Object(Z.jsx)("div",{className:Ve.a.moreIcon,children:Object(Z.jsx)(me.a,{})})}),Object(Z.jsx)(xe,{isVisible:i,setIsVisible:l,options:u,containerRef:r})]})},Ue=a(110),qe=a.n(Ue),He=function(e){var t=e.isPlaying,a=e.setIsPlaying,n=t?{borderColor:"#980031",backgroundColor:"#98003199"}:{borderColor:"#489900",backgroundColor:"#48990099"};return Object(Z.jsxs)("div",{onClick:function(){a(!t)},className:qe.a.play,style:n,children:[Object(Z.jsx)("div",{className:qe.a.playText,children:t?"Stop":"Play"}),Object(Z.jsx)("div",{className:qe.a.playIcon,children:t?Object(Z.jsx)(me.e,{}):Object(Z.jsx)(me.c,{})})]})},Ke=a(137),We=a.n(Ke),Ye=function(e){var t=e.saveData;return Object(Z.jsx)("div",{title:"Save",onClick:function(){!function(e){var t=localStorage.getItem(K);t=null===t?{}:H(t);var a=prompt("Save as:");if(null!==a)if(""!==a){if(t[a]&&!window.confirm('Overwrite previous "'.concat(a,'"?')))return;t[a]={data:e,date:Date.now()},localStorage.setItem(K,q(t))}else alert("Invalid name.")}(t)},className:We.a.save,style:{borderColor:V,backgroundColor:"#666666cc"},children:Object(Z.jsx)("div",{className:We.a.saveIcon,children:Object(Z.jsx)(me.d,{})})})},ze=a(138),Qe=a(194),Xe=a.n(Qe),Ze=function(e){var t=e.isPlaying,a=e.numBeats,r=e.bpm,o=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e,n,c=a/(4*r)*60;t?(e=o.current,n=c,ze.a.fromTo(e,{left:0,opacity:1},{opacity:1,left:"100%",ease:"linear",repeat:-1,duration:n})):function(e,t){ze.a.fromTo(e,{left:0,opacity:0},{left:0,opacity:0,ease:"linear",repeat:-1,duration:t})}(o.current,c)}),[t,a,r]),Object(Z.jsx)("div",{ref:o,className:Xe.a.arm})},$e=a(197),et=a(25),tt=a.n(et),at=function(e){var t=e.color,a=e.index,n=e.isError,r=Object($e.a)(e,["color","index","isError"]),o={borderColor:t},c=[tt.a.input];return n&&c.push(tt.a.inputError),Object(Z.jsx)("input",Object(le.a)({index:a,className:c.join(" "),style:o},r))},nt=function(e){var t=e.index,a=e.track,n=e.setTrack,r=a.formula,o=a.noteDuration,c=!0;try{R(r,[0,Math.PI])}catch(i){c=!1}var s=function(e){return function(t){a[e]=t.target.value,n(a)}};return Object(Z.jsxs)("div",{className:tt.a.editable,children:[Object(Z.jsx)("label",{className:tt.a.label,children:"Formula"}),Object(Z.jsx)(at,{isError:!c,color:a.color,index:t,value:r,onChange:s("formula")}),Object(Z.jsx)("label",{className:tt.a.label,children:"Note duration (ms)"}),Object(Z.jsx)(at,{color:a.color,index:t,value:o,onChange:s("noteDuration"),type:"number"})]})},rt=function(e){var t=e.isCollapsed,a=e.index,n=e.track,r=e.tracks,o=e.setTrack,c=e.setTracks;if(t)return null;var s=[tt.a.icon];n.isMuted&&s.push(tt.a.isMuted);var i=n.isMuted?me.h:me.g;return Object(Z.jsxs)("div",{className:tt.a.icons,children:[Object(Z.jsx)("div",{title:"Mute",onClick:function(){o(Object(le.a)(Object(le.a)({},n),{},{isMuted:!n.isMuted}))},className:s.join(" "),children:Object(Z.jsx)(i,{className:tt.a.muteIcon})}),Object(Z.jsx)("div",{title:"Delete",onClick:function(){1!==r.length&&(r.splice(a,1),c(Object(z.a)(r)))},className:tt.a.icon,children:Object(Z.jsx)(me.f,{className:tt.a.trashIcon})})]})},ot=function(e){var t=e.index,a=e.track,r=e.tracks,o=e.setTracks,c=e.setTrack,i=Object(n.useState)(0!==t),l=Object(s.a)(i,2),u=l[0],d=l[1],b=a.color,f={borderColor:b,backgroundColor:b+P},p=[tt.a.container];u&&p.push(tt.a.collapsed);return Object(Z.jsxs)("div",{style:f,className:p.join(" "),children:[Object(Z.jsxs)("div",{className:tt.a.header,children:[Object(Z.jsxs)("div",{onClick:function(e){d(!u)},className:tt.a.title,children:["Track ",t+1]}),Object(Z.jsx)(rt,{index:t,isCollapsed:u,track:a,tracks:r,setTrack:c,setTracks:o})]}),u?null:Object(Z.jsx)(nt,{track:a,index:t,setTrack:c})]})},ct=a(61),st=a.n(ct),it=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(60),c=Object(s.a)(o,2),i=c[0],u=c[1],d=Object(n.useState)(16),b=Object(s.a)(d,2),f=b[0],p=b[1],j=Object(n.useState)(14),m=Object(s.a)(j,2),v=m[0],h=m[1],O=Object(n.useState)(!1),x=Object(s.a)(O,2),_=x[0],k=x[1],N=Object(n.useState)(w[3]),y=Object(s.a)(N,2),g=y[0],C=y[1],T=Object(n.useState)("E3"),B=Object(s.a)(T,2),M=B[0],D=B[1],S=Object(n.useMemo)((function(){return function(e,t,a,n,r){for(var o=n.notes.indexOf(r),c=[],s=0;s<t;s++)c.push(s/t*2*Math.PI);var i=e.map((function(e){var t=e.formula;try{return R(t,c).yValues}catch(a){return[]}})),u=l()(i).flatten().min(),d=l()(i).flatten().max();return i.map((function(e){return e.map((function(e){return Math.round((e-u)/(d-u||1)*(a-1))})).map((function(e){return n.notes[e+o]}))}))}(a,f,v,g,M)}),[a,f,v,g,M]);Object(n.useEffect)((function(){var e=Y(),t=e.tracks,a=e.bpm,n=e.numBeats,o=e.noteRange,c=e.scale,s=e.lowNote;r(t),u(a),p(n),h(o),C(c),D(s)}),[]),Object(n.useEffect)((function(){_?E(a,S,i,f):I()}),[_,a,S,i,f]);var A=Object(n.useMemo)((function(){return{bpm:i,numBeats:f,noteRange:v,scale:g,lowNote:M,tracks:a}}),[i,f,v,g,M,a]);Object(n.useEffect)((function(){window.history.pushState({},"",window.location.origin+window.location.pathname),function(e){var t=q(e);localStorage.setItem("d",t)}(A)}),[A]);var G=function(e){return function(t){var n=l.a.cloneDeep(a);n[e]=t,r(n)}};return Object(Z.jsxs)("div",{className:st.a.app,children:[Object(Z.jsxs)("div",{children:[Object(Z.jsx)(je,{}),Object(Z.jsxs)("div",{className:st.a.row,children:[Object(Z.jsxs)("div",{className:st.a.left,children:[Object(Z.jsxs)("div",{className:st.a.chart,children:[Object(Z.jsx)(ie,{tracks:a,numBeats:f,notes:S}),Object(Z.jsx)(Ze,{isPlaying:_,bpm:i,numBeats:f})]}),a.map((function(e,t){return Object(Z.jsx)(be,{numBeats:f,track:e,setTrack:G(t)},t)}))]}),Object(Z.jsxs)("div",{className:st.a.right,children:[Object(Z.jsxs)("div",{className:st.a.buttons,children:[Object(Z.jsx)(He,{isPlaying:_,setIsPlaying:k}),Object(Z.jsx)($,{tracks:a,setTracks:r}),Object(Z.jsx)(Ye,{saveData:A}),Object(Z.jsx)(Ne,{setBpm:u,setNumBeats:p,setNoteRange:h,setScale:C,setLowNote:D,setTracks:r}),Object(Z.jsx)(Je,{saveData:A,notes:S})]}),a.map((function(e,t){return Object(Z.jsx)(ot,{index:t,track:e,tracks:a,setTrack:G(t),setTracks:r},t)}))]})]})]}),Object(Z.jsx)(Ee,{scale:g,lowNote:M,bpm:i,numBeats:f,noteRange:v,setScale:C,setLowNote:D,setBpm:u,setNumBeats:p,setNoteRange:h})]})};a(358);c.a.render(Object(Z.jsx)(r.a.StrictMode,{children:Object(Z.jsx)(it,{})}),document.getElementById("root"))},61:function(e,t,a){e.exports={app:"App_app__1IksY",row:"App_row__2IEL-",left:"App_left__1u-q5",chart:"App_chart__1PrK6",right:"App_right__3pQWj",buttons:"App_buttons__22Fcg"}},86:function(e,t,a){e.exports={buttons:"EnabledNotes_buttons__YuCJP",muted:"EnabledNotes_muted__2I7zC",button:"EnabledNotes_button__3316l",disabled:"EnabledNotes_disabled__1W2ff"}},87:function(e,t,a){e.exports={container:"Header_container__1VC87",text:"Header_text__G3J9D",link:"Header_link__2wI74",line:"Header_line__TnUnq"}}},[[359,1,2]]]);
//# sourceMappingURL=main.7f2f5058.chunk.js.map