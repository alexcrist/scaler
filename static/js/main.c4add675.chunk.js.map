{"version":3,"sources":["components/Chart/Chart.module.css","components/App/App.module.css","util/formulaToData.js","components/Chart/Chart.js","components/Notes/Notes.js","constants/notes.js","components/App/App.js","util/audioPlayer.js","util/scalePlayer.js","constants/scales.js","util/noteCalculator.js","index.js","components/Notes/Notes.module.css"],"names":["module","exports","formulaToData","formula","xValues","replace","substring","Error","data","x","value","Parser","evaluate","push","e","COLORS","Chart","formulas","numNotes","noteRange","notes","numX","xInc","Math","PI","xRange","i","formulaDatas","map","f","filter","dataPoint","name","j","length","key","y","verticalPoints","horizontalPoints","className","styles","chart","LineChart","width","height","CartesianGrid","stroke","strokeDasharray","_","Line","type","dataKey","dot","strokeWidth","Tooltip","formatter","__","props","round","payload","labelFormatter","label","Notes","enabledNotes","setEnabledNotes","periodDuration","timeArmStyle","isPlaying","animationDuration","animation","isEnabled","onClick","index","newEnabledNotes","oldNote","newNote","toggleNote","note","enabled","timeArm","style","NOTES","FREQS","NOTE_MAP","interval","context","window","AudioContext","webkitAudioContext","play","freq","noteDuration","isNaN","masterVolume","createGain","gain","setValueCurveAtTime","Float32Array","v","currentTime","connect","destination","oscillator","createOscillator","frequency","setValueAtTime","start","setTimeout","stop","playIndex","stopScale","clearInterval","SCALES","pitches","scale","pitch","includes","initailEnabledNotes","initialScale","App","useState","setFormula","setIsPlaying","setPeriodDuration","setScale","lowNote","setLowNote","setNoteRange","setNoteDuration","enabledNotesRef","useRef","noteDurationRef","useEffect","current","minNoteIndex","indexOf","minData","min","maxData","max","calculateNotes","container","labels","inputs","input","onChange","target","Number","newScale","selected","freqs","setInterval","playScale","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c4add675.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chart\":\"Chart_chart__2ay2D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__16xz_\",\"inputs\":\"App_inputs__2pcYr\",\"input\":\"App_input__cnruI\",\"labels\":\"App_labels__sWrEY\",\"play\":\"App_play__3MUmt\"};","import _ from 'lodash';\nimport { Parser } from 'expr-eval';\n\nconst formulaToData = (formula, xValues) => {\n  formula = formula.replace(/\\s+/g, '');\n\n  if (formula.substring(0,  2) !== 'y=') {\n    throw Error('Invalid formula: ' + formula);\n  }\n\n  formula = formula.substring(2);\n\n  const data = [];\n  for (const x of xValues) {\n    try {\n      const value = Parser.evaluate(formula, { x });\n      data.push(value);\n    } catch (e) {\n      throw Error('Formula evaluation error: ' + formula);\n    }\n  }\n\n  return data;\n};\n\nexport default formulaToData;","import { LineChart, Line, CartesianGrid, Tooltip } from 'recharts';\nimport formulaToData from '../../util/formulaToData';\nimport styles from './Chart.module.css';\n\nconst W = 730;\nconst H = 250;\nconst COLORS = [\n  '#8338ec',\n  '#ff006e',\n  '#3a86ff',\n  '#fb5607',\n  '#ffbe0b',\n];\n\nconst Chart = ({\n  formulas,\n  numNotes,\n  noteRange,\n  notes\n}) => {\n\n  noteRange = noteRange - 1;\n  if (noteRange < 1) {\n    noteRange = 1;\n  }\n\n  const xMin = 0;\n  const xMax = 2 * Math.PI;\n  const numX = numNotes * 100;\n  const xInc = (xMax - xMin) / numX;\n\n  const xRange = [];\n  for (let i = 0; i < numX; i++) {\n    xRange.push(i * xInc);\n  }\n\n  const formulaDatas = formulas\n    .map(f => {\n      try {\n        return formulaToData(f, xRange);\n      } catch (e) {\n        return null;\n      }\n    })\n    .filter(f => f !== null);\n\n  const data = [];\n  for (let i = 0; i < numX; i++) {\n    const x = xRange[i];\n    const dataPoint = { name: i };\n\n    for (let j = 0; j < formulaDatas.length; j++) {\n      const key = `f${j}`;\n      const y = formulaDatas[j][i];\n      dataPoint[key] = y;\n    }\n\n    data.push(dataPoint);\n  }\n\n  const verticalPoints = [];\n  for (let i = 0; i < numNotes + 1; i++) {\n    verticalPoints.push(i * W / numNotes);\n  }\n\n  const horizontalPoints = [];\n  for (let i = 0; i < noteRange + 1; i++) {\n    horizontalPoints.push(i * H / noteRange);\n  }\n\n  return (\n    <div className={styles.chart}>\n\n      <LineChart\n        width={W}\n        height={H}\n        data={data}\n      >\n        <CartesianGrid\n          stroke='#ccc'\n          strokeDasharray='3 3' \n          verticalPoints={verticalPoints}\n          horizontalPoints={horizontalPoints}\n        />\n        {formulaDatas.map((_, i) => \n          <Line\n            key={i}\n            type='monotone'\n            dataKey={`f${i}`}\n            stroke={COLORS[i % COLORS.length] + '99'}\n            dot={false}\n            strokeWidth={3}\n          />\n        )}\n\n        <Tooltip\n          formatter={(_, __, props) => notes[Math.round(props.payload.name / 100)]}\n          labelFormatter={(label) => Math.round(label / 100)} \n        />\n      </LineChart>\n\n    </div>\n  );\n}\n\nexport default Chart;\n","import styles from './Notes.module.css';\n\nconst Notes = ({ enabledNotes, setEnabledNotes, periodDuration, isPlaying }) => {\n\n  const timeArmStyle = isPlaying ? \n    { animationDuration: `${periodDuration}ms` } : \n    { animation: 'none' };\n\n  const toggleNote = (index) => {\n    const newEnabledNotes = [];\n    for (let i = 0; i < enabledNotes.length; i++) {\n      const oldNote = enabledNotes[i];\n      const newNote = i === index ? !oldNote : oldNote;\n      newEnabledNotes.push(newNote);\n    }\n    setEnabledNotes(newEnabledNotes);\n  };\n\n  return (\n    <div className={styles.notes}>\n      {enabledNotes.map((isEnabled, i) => \n        <div\n          key={i}\n          onClick={() => toggleNote(i)}\n          className={`${styles.note} ${isEnabled ? styles.enabled : ''}`} \n        />\n      )}\n      <div\n        className={styles.timeArm}\n        style={timeArmStyle} \n      />\n    </div>\n  );\n};\n\nexport default Notes;","export const NOTES = [ \n  'C0',  'Db0', 'D0', 'Eb0', 'E0', 'F0', 'Gb0', 'G0', 'Ab0', 'A0', 'Bb0', 'B0',\n  'C1',  'Db1', 'D1', 'Eb1', 'E1', 'F1', 'Gb1', 'G1', 'Ab1', 'A1', 'Bb1', 'B1',\n  'C2',  'Db2', 'D2', 'Eb2', 'E2', 'F2', 'Gb2', 'G2', 'Ab2', 'A2', 'Bb2', 'B2',\n  'C3',  'Db3', 'D3', 'Eb3', 'E3', 'F3', 'Gb3', 'G3', 'Ab3', 'A3', 'Bb3', 'B3',\n  'C4',  'Db4', 'D4', 'Eb4', 'E4', 'F4', 'Gb4', 'G4', 'Ab4', 'A4', 'Bb4', 'B4',\n  'C5',  'Db5', 'D5', 'Eb5', 'E5', 'F5', 'Gb5', 'G5', 'Ab5', 'A5', 'Bb5', 'B5',\n  'C6',  'Db6', 'D6', 'Eb6', 'E6', 'F6', 'Gb6', 'G6', 'Ab6', 'A6', 'Bb6', 'B6',\n  'C7',  'Db7', 'D7', 'Eb7', 'E7', 'F7', 'Gb7', 'G7', 'Ab7', 'A7', 'Bb7', 'B7',\n  'C8',  'Db8', 'D8', 'Eb8', 'E8', 'F8', 'Gb8', 'G8', 'Ab8', 'A8', 'Bb8', 'B8'\n];\n\nexport const FREQS = [\n  16.35, 17.32, 18.35, 19.45, 20.60, 21.83, 23.12, 24.50, 25.96, 27.50, 29.14, \n  30.87, 32.70, 34.65, 36.71, 38.89, 41.20, 43.65, 46.25, 49.00, 51.91, 55.00, \n  58.27, 61.74, 65.41, 69.30, 73.42, 77.78, 82.41, 87.31, 92.50, 98.00, 103.83, \n  110.00, 116.54, 123.47, 130.81, 138.59, 146.83, 155.56, 164.81, 174.61, 185.00, \n  196.00, 207.65, 220.00, 233.08, 246.94, 261.63, 277.18, 293.66, 311.13, 329.63, \n  349.23, 369.99, 392.00, 415.30, 440.00, 466.16, 493.88, 523.25, 554.37, 587.33, \n  622.25, 659.25, 698.46, 739.99, 783.99, 830.61, 880.00, 932.33, 987.77, 1046.50,\n  1108.73, 1174.66, 1244.51, 1318.51, 1396.91, 1479.98, 1567.98, 1661.22, 1760.00, \n  1864.66, 1975.53, 2093.00, 2217.46, 2349.32, 2489.02, 2637.02, 2793.83, 2959.96, \n  3135.96, 3322.44, 3520.00, 3729.31, 3951.07, 4186.01, 4434.92, 4698.63, 4978.03, \n  5274.04, 5587.65, 5919.91, 6271.93, 6644.88, 7040.00, 7458.62, 7902.13\n];\n\nif (NOTES.length !== FREQS.length) {\n  throw Error('# notes !== # freqs');\n}\n\nexport const NOTE_MAP = {};\nfor (let i = 0; i < NOTES.length; i++) {\n  NOTE_MAP[NOTES[i]] = FREQS[i];\n}\n\n\n\n","import { useEffect, useRef, useState } from 'react';\nimport Chart from '../Chart/Chart';\nimport styles from './App.module.css';\nimport Notes from '../Notes/Notes';\nimport { playScale, stopScale } from '../../util/scalePlayer';\nimport { SCALES } from '../../constants/scales';\nimport { calculateNotes } from '../../util/noteCalculator';\n\nconst initialNumNotes = 16;\nconst initailEnabledNotes = [];\nfor (let i = 0; i < initialNumNotes; i++) {\n  initailEnabledNotes.push(true);\n}\nconst initialScaleIndex = 2;\nconst initialScale = SCALES[initialScaleIndex];\n\nconst App = () => {\n\n  // State =====================================================================\n\n  const [formula, setFormula] = useState('y = max(sin(x), cos(4*x))');\n  const [enabledNotes, setEnabledNotes] = useState(initailEnabledNotes);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [periodDuration, setPeriodDuration] = useState(3000);\n  const [scale, setScale] = useState(initialScale);\n  const [lowNote, setLowNote] = useState(initialScale.pitches[0] + '3');\n  const [noteRange, setNoteRange] = useState(14);\n  const [noteDuration, setNoteDuration] = useState(85);\n\n  // Refs ======================================================================\n\n  const enabledNotesRef = useRef(enabledNotes);\n  const noteDurationRef = useRef(noteDuration);\n  useEffect(() => { enabledNotesRef.current = enabledNotes; }, [enabledNotes]);\n  useEffect(() => { noteDurationRef.current = noteDuration; }, [noteDuration]);\n  \n  // Notes to play =============================================================\n\n  const numNotes = enabledNotes.length;\n  const notes = calculateNotes(\n    scale, \n    numNotes, \n    formula, \n    lowNote, \n    noteRange\n  );\n\n  // Event handlers ============================================================\n\n  const onClickButton = () => {\n    if (isPlaying) {\n      setIsPlaying(false);\n      stopScale();\n    } else {\n      setIsPlaying(true);\n      playScale(notes, enabledNotesRef, periodDuration, noteDurationRef);\n    }\n  };\n\n  const onChangeFormula = (e) => {\n    setIsPlaying(false);\n    stopScale();\n    setFormula(e.target.value);\n  };\n\n  const onChangePeriod = (e) => {\n    setIsPlaying(false);\n    stopScale();\n    setPeriodDuration(Number(e.target.value));\n  };\n\n  const onChangeNumNotes = (e) => {\n    setIsPlaying(false);\n    stopScale();\n    if (!isNaN(Number(e.target.value))) {\n      const newEnabledNotes = [];\n      for (let i = 0; i < Number(e.target.value); i++) {\n        newEnabledNotes.push(true);\n      }\n      setEnabledNotes(newEnabledNotes);\n    }\n  };\n\n  const onChangeScale = (e) => {\n    setIsPlaying(false);\n    stopScale();\n    const newScale = SCALES[e.target.value];\n    setScale(newScale);\n    setLowNote(newScale.pitches[0] + '3');\n  };\n\n  const onChangeLowNote = (e) => {\n    setIsPlaying(false);\n    stopScale();\n    setLowNote(e.target.value);\n  };\n\n  const onChangeNoteRange = (e) => {\n    setIsPlaying(false);\n    stopScale();\n    if (!isNaN(Number(e.target.value))) {\n      setNoteRange(Number(e.target.value));\n    }\n  }\n\n  const onChangeNoteDuration = (e) => {\n    if (!isNaN(Number(e.target.value))) {\n      setNoteDuration(Number(e.target.value));\n    }\n  };\n\n  // Content ===================================================================\n\n  return (\n    <div className={styles.container}>\n\n      <div className={styles.labels}>\n        <label>Formula</label>\n        <label>Period (ms)</label>\n        <label>Beats</label>\n      </div>\n\n      <div className={styles.inputs}>\n        <input\n          className={styles.input}\n          value={formula}\n          onChange={onChangeFormula}\n        />\n        <input\n          className={styles.input}\n          value={periodDuration}\n          onChange={onChangePeriod}\n          type='number'\n        />\n        <input\n          className={styles.input}\n          value={enabledNotes.length}\n          onChange={onChangeNumNotes}\n          type='number'\n        />\n      </div>\n\n      <div className={styles.labels}>\n        <label>Scale</label>\n        <label>Low note</label>\n        <label>Note range</label>\n        <label>Note duration (ms)</label>\n      </div>\n\n      <div className={styles.inputs}>\n        <select className={styles.input} onChange={onChangeScale}>\n          {SCALES.map((scale, i) => <option value={i} key={i} selected={i === initialScaleIndex}>{scale.name}</option>)}\n        </select>\n        <select className={styles.input} value={lowNote} onChange={onChangeLowNote}>\n          {scale.notes.map((note, i) => <option value={note} key={i}>{note}</option>)}\n        </select>\n        <input\n          className={styles.input}\n          value={noteRange}\n          onChange={onChangeNoteRange}\n          type='number'\n        />\n        <input\n          className={styles.input}\n          value={noteDuration}\n          onChange={onChangeNoteDuration}\n          type='number'\n        />\n      </div>\n\n      <Chart\n        formulas={[formula]}\n        numNotes={enabledNotes.length}\n        noteRange={noteRange}\n        notes={notes}\n      />\n\n      <Notes\n        enabledNotes={enabledNotes}\n        setEnabledNotes={setEnabledNotes}\n        isPlaying={isPlaying}\n        periodDuration={periodDuration}\n      />\n\n      <button className={styles.play} onClick={onClickButton}>\n        {isPlaying ? 'stop' : 'start'}\n      </button>\n\n    </div>\n  );\n}\n\nexport default App;\n","const AudioContext = window.AudioContext || window.webkitAudioContext;\nconst context = new AudioContext();\n\nexport const play = (freq, noteDuration) => {\n  if (typeof freq !== 'number' || isNaN(freq) || !freq) {\n    return;\n  }\n  noteDuration = noteDuration || 85;\n  const masterVolume = context.createGain();\n  masterVolume.gain.setValueCurveAtTime(new Float32Array([0, 0.8, 1, 0.3, 0].map(v => v * 0.05)), context.currentTime, noteDuration / 1000);\n  masterVolume.connect(context.destination);\n  const oscillator = context.createOscillator();\n  oscillator.connect(masterVolume);\n  oscillator.frequency.setValueAtTime(freq, 0);\n  oscillator.start(0);\n  setTimeout(() => oscillator.stop(), noteDuration);\n};","import _ from 'lodash';\nimport { NOTE_MAP } from \"../constants/notes\";\nimport { play } from \"./audioPlayer\";\n\nlet interval;\nlet playIndex = 1;\n\nexport const playScale = (\n  notes,\n  enabledNotesRef, \n  periodDuration,\n  noteDurationRef\n) => {\n\n  const numNotes = enabledNotesRef.current.length;\n\n  // Determine frequencies to play\n  const freqs = notes.map(note => NOTE_MAP[note]);\n\n  // Play first note\n  const freq = freqs[0];\n  const isEnabled = enabledNotesRef.current[0];\n  if (isEnabled) {\n    play(freq, noteDurationRef.current);\n  }\n  playIndex = 1;\n\n  // Create interval to play future notes\n  interval = setInterval(() => {\n    const freq = freqs[playIndex];\n    const isEnabled = enabledNotesRef.current[playIndex];\n    if (isEnabled) {\n      play(freq, noteDurationRef.current);\n    }\n    playIndex = (playIndex + 1) % numNotes;\n  }, periodDuration / numNotes);\n};\n\nexport const stopScale = () => {\n  clearInterval(interval);\n  playIndex = 0;\n};\n\n","import { NOTES } from \"./notes\";\n\nexport const SCALES = [\n  {\n    name: 'C major',\n    pitches: ['C', 'D', 'E', 'F', 'G', 'A', 'B']\n  },\n  {\n    name: 'D minor',\n    pitches: ['D', 'E', 'F', 'G', 'A', 'Bb', 'C']\n  },\n  {\n    name: 'D major',\n    pitches: ['D', 'E', 'Gb', 'G', 'A', 'B', 'Db']\n  },\n  {\n    name: 'E minor',\n    pitches: ['E', 'Gb', 'G', 'A', 'B', 'C', 'D']\n  },\n  {\n    name: 'E major',\n    pitches: ['E', 'Gb', 'G', 'A', 'B', 'C', 'D']\n  },\n  {\n    name: 'F minor',\n    pitches: ['F', 'G', 'Ab', 'Bb', 'C', 'Db', 'Eb']\n  },\n  {\n    name: 'F major',\n    pitches: ['F', 'G', 'A', 'Bb', 'C', 'D', 'E']\n  },\n  {\n    name: 'G minor',\n    pitches: ['G', 'A', 'Bb', 'C', 'D', 'Eb', 'F']\n  },\n  {\n    name: 'G major',\n    pitches: ['G', 'A', 'B', 'C', 'D', 'E', 'Gb']\n  },\n  {\n    name: 'A minor',\n    pitches: ['A', 'B', 'C', 'D', 'E', 'F', 'G']\n  },\n  {\n    name: 'A major',\n    pitches: ['A', 'B', 'Db', 'D', 'E', 'Gb', 'Ab']\n  },\n  {\n    name: 'B minor',\n    pitches: ['B', 'Db', 'D', 'E', 'Gb', 'G', 'A']\n  },\n  {\n    name: 'B major',\n    pitches: ['B', 'Db', 'Eb', 'E', 'Gb', 'Ab', 'Bb']\n  }\n].map((scale) => {\n  scale.notes = [];\n  for (const note of NOTES) {\n    const pitch = note.substring(0, note.length - 1);\n    if (scale.pitches.includes(pitch)) {\n      scale.notes.push(note);\n    }\n  }\n  return scale;\n});","import _ from 'lodash';\nimport formulaToData from './formulaToData';\n\nexport const calculateNotes = (\n  scale,\n  numNotes,\n  formula,\n  lowNote,\n  noteRange\n) => {\n  noteRange = noteRange - 1;\n\n  const minNoteIndex = scale.notes.indexOf(lowNote);\n\n  const xValues = [];\n  for (let i = 0; i < numNotes; i++) {\n    xValues.push(i / numNotes * 2 * Math.PI);\n  }\n\n  let data;\n  try {\n    data = formulaToData(formula, xValues);\n  } catch (e) {\n    return [];\n  }\n\n  const minData = _.min(data);\n  const maxData = _.max(data);\n\n  const noteIndices = data.map(value => {\n    return Math.round(\n      (value - minData) /\n      ((maxData - minData) || 1) *\n      noteRange\n    );\n  });\n\n  const notes = noteIndices.map(index => {\n    return scale.notes[index + minNoteIndex];\n  });\n\n  return notes;\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notes\":\"Notes_notes__2CEZy\",\"note\":\"Notes_note__32ig5\",\"enabled\":\"Notes_enabled__34Zsz\",\"timeArm\":\"Notes_timeArm__3vyiP\",\"slide\":\"Notes_slide__18buH\"};"],"sourceRoot":""}