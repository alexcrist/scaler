{"version":3,"sources":["components/AddTrack/AddTrack.module.css","components/Play/Play.module.css","components/Chart/Chart.module.css","components/TimelineArm/TimelineArm.module.css","components/TrackOptions/TrackOptions.module.css","util/formulaToData.js","constants/notes.js","constants/scales.js","util/audioPlayer.js","util/scalePlayer.js","constants/colors.js","util/getInitialTracks.js","components/Chart/Chart.js","components/TrackOptions/TrackOptions.js","components/LoopOptions/LoopOptions.js","components/Title/Title.js","components/TimelineArm/TimelineArm.js","components/EnabledNotes/EnabledNotes.js","components/AddTrack/AddTrack.js","components/Play/Play.js","components/App/App.js","util/noteCalculator.js","index.js","components/App/App.module.css","components/LoopOptions/LoopOptions.module.css","components/Title/Title.module.css","components/EnabledNotes/EnabledNotes.module.css"],"names":["module","exports","formulaToData","formula","xValues","replace","substring","Error","data","x","value","Parser","evaluate","push","e","NOTES","FREQS","length","NOTE_MAP","i","SCALES","name","pitches","map","scale","notes","note","pitch","includes","context","window","AudioContext","webkitAudioContext","play","freq","noteDuration","isNaN","masterVolume","createGain","gain","setValueCurveAtTime","Float32Array","v","currentTime","connect","destination","oscillator","createOscillator","frequency","setValueAtTime","start","setTimeout","stop","playScale","dataRef","beatIndex","current","tracks","bpm","numBeats","isPlaying","isMuted","disabledBeats","isBeatDisabled","delay","newBeatIndex","COLORS","OPACITY_1","GRAY_1","getInitialTracks","color","Chart","numXValues","Math","PI","yValuesArray","track","yValues","j","y","xLines","ReferenceLine","strokeDasharray","yLines","yMin","floor","_","flatten","min","yMax","ceil","max","className","styles","container","ResponsiveContainer","width","height","LineChart","Line","type","dataKey","stroke","opacity","dot","strokeWidth","Tooltip","formatter","__","properties","payload","trackIndex","Number","round","labelFormatter","label","YAxis","domain","hide","Input","index","props","style","borderColor","input","Inputs","setTrack","createAttributeSetter","attribute","target","editable","onChange","Icons","isCollapsed","setTracks","muteClasses","icon","MuteIcon","FaVolumeMute","FaVolumeDown","icons","onClick","join","muteIcon","splice","trashIcon","TrackOptions","useState","setIsCollapsed","containerStyle","backgroundColor","containerClasses","collapsed","header","title","inputStyle","inputGroup","LoopOptions","noteRange","setBpm","setNumBeats","setNoteRange","disabled","Title","text","line","link","href","TimelineArm","periodDuration","timelineArmStyle","animationDuration","animation","display","arm","EnabledNotes","buttonStyle","buttons","buttonClasses","button","wasEnabled","buttonsClasses","muted","AddTrack","lastColor","newColorIndex","indexOf","newTrack","createTrack","createTrackText","Play","setIsPlaying","playStyle","playText","App","useMemo","lowNote","minNoteIndex","calculateNotes","scalePlayerData","useRef","useEffect","createSetTrack","newTracks","cloneDeep","app","row","left","chart","right","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7dde74a7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"createTrack\":\"AddTrack_createTrack__1dZTK\",\"createTrackText\":\"AddTrack_createTrackText__3wNni\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"play\":\"Play_play__2x_Gd\",\"playText\":\"Play_playText__1skLF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Chart_container__1PIOn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"arm\":\"TimelineArm_arm__2cLiz\",\"slide\":\"TimelineArm_slide__3GUfj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TrackOptions_container__2E_dx\",\"collapsed\":\"TrackOptions_collapsed__X5vja\",\"header\":\"TrackOptions_header__3Lfwo\",\"icons\":\"TrackOptions_icons__33YYK\",\"icon\":\"TrackOptions_icon__3jQrz\",\"isMuted\":\"TrackOptions_isMuted__4aVJB\",\"muteIcon\":\"TrackOptions_muteIcon__175TR\",\"trashIcon\":\"TrackOptions_trashIcon__30wpV\",\"title\":\"TrackOptions_title__1ue4w\",\"label\":\"TrackOptions_label__1sLEb\",\"input\":\"TrackOptions_input__3reUO\"};","import { Parser } from 'expr-eval';\n\nconst formulaToData = (formula, xValues) => {\n  formula = formula.replace(/\\s+/g, '');\n\n  if (formula.substring(0,  2) !== 'y=') {\n    throw Error('Invalid formula: ' + formula);\n  }\n\n  formula = formula.substring(2);\n\n  const data = [];\n  for (const x of xValues) {\n    try {\n      const value = Parser.evaluate(formula, { x });\n      data.push(value);\n    } catch (e) {\n      throw Error('Formula evaluation error: ' + formula);\n    }\n  }\n\n  return data;\n};\n\nexport default formulaToData;","export const NOTES = [ \n  'C0',  'Db0', 'D0', 'Eb0', 'E0', 'F0', 'Gb0', 'G0', 'Ab0', 'A0', 'Bb0', 'B0',\n  'C1',  'Db1', 'D1', 'Eb1', 'E1', 'F1', 'Gb1', 'G1', 'Ab1', 'A1', 'Bb1', 'B1',\n  'C2',  'Db2', 'D2', 'Eb2', 'E2', 'F2', 'Gb2', 'G2', 'Ab2', 'A2', 'Bb2', 'B2',\n  'C3',  'Db3', 'D3', 'Eb3', 'E3', 'F3', 'Gb3', 'G3', 'Ab3', 'A3', 'Bb3', 'B3',\n  'C4',  'Db4', 'D4', 'Eb4', 'E4', 'F4', 'Gb4', 'G4', 'Ab4', 'A4', 'Bb4', 'B4',\n  'C5',  'Db5', 'D5', 'Eb5', 'E5', 'F5', 'Gb5', 'G5', 'Ab5', 'A5', 'Bb5', 'B5',\n  'C6',  'Db6', 'D6', 'Eb6', 'E6', 'F6', 'Gb6', 'G6', 'Ab6', 'A6', 'Bb6', 'B6',\n  'C7',  'Db7', 'D7', 'Eb7', 'E7', 'F7', 'Gb7', 'G7', 'Ab7', 'A7', 'Bb7', 'B7',\n  'C8',  'Db8', 'D8', 'Eb8', 'E8', 'F8', 'Gb8', 'G8', 'Ab8', 'A8', 'Bb8', 'B8'\n];\n\nexport const FREQS = [\n  16.35, 17.32, 18.35, 19.45, 20.60, 21.83, 23.12, 24.50, 25.96, 27.50, 29.14, \n  30.87, 32.70, 34.65, 36.71, 38.89, 41.20, 43.65, 46.25, 49.00, 51.91, 55.00, \n  58.27, 61.74, 65.41, 69.30, 73.42, 77.78, 82.41, 87.31, 92.50, 98.00, 103.83, \n  110.00, 116.54, 123.47, 130.81, 138.59, 146.83, 155.56, 164.81, 174.61, 185.00, \n  196.00, 207.65, 220.00, 233.08, 246.94, 261.63, 277.18, 293.66, 311.13, 329.63, \n  349.23, 369.99, 392.00, 415.30, 440.00, 466.16, 493.88, 523.25, 554.37, 587.33, \n  622.25, 659.25, 698.46, 739.99, 783.99, 830.61, 880.00, 932.33, 987.77, 1046.50,\n  1108.73, 1174.66, 1244.51, 1318.51, 1396.91, 1479.98, 1567.98, 1661.22, 1760.00, \n  1864.66, 1975.53, 2093.00, 2217.46, 2349.32, 2489.02, 2637.02, 2793.83, 2959.96, \n  3135.96, 3322.44, 3520.00, 3729.31, 3951.07, 4186.01, 4434.92, 4698.63, 4978.03, \n  5274.04, 5587.65, 5919.91, 6271.93, 6644.88, 7040.00, 7458.62, 7902.13\n];\n\nif (NOTES.length !== FREQS.length) {\n  throw Error('# notes !== # freqs');\n}\n\nexport const NOTE_MAP = {};\nfor (let i = 0; i < NOTES.length; i++) {\n  NOTE_MAP[NOTES[i]] = FREQS[i];\n}\n\n\n\n","import { NOTES } from \"./notes\";\n\nexport const SCALES = [\n  {\n    name: 'C major',\n    pitches: ['C', 'D', 'E', 'F', 'G', 'A', 'B']\n  },\n  {\n    name: 'D minor',\n    pitches: ['D', 'E', 'F', 'G', 'A', 'Bb', 'C']\n  },\n  {\n    name: 'D major',\n    pitches: ['D', 'E', 'Gb', 'G', 'A', 'B', 'Db']\n  },\n  {\n    name: 'E minor',\n    pitches: ['E', 'Gb', 'G', 'A', 'B', 'C', 'D']\n  },\n  {\n    name: 'E major',\n    pitches: ['E', 'Gb', 'G', 'A', 'B', 'C', 'D']\n  },\n  {\n    name: 'F minor',\n    pitches: ['F', 'G', 'Ab', 'Bb', 'C', 'Db', 'Eb']\n  },\n  {\n    name: 'F major',\n    pitches: ['F', 'G', 'A', 'Bb', 'C', 'D', 'E']\n  },\n  {\n    name: 'G minor',\n    pitches: ['G', 'A', 'Bb', 'C', 'D', 'Eb', 'F']\n  },\n  {\n    name: 'G major',\n    pitches: ['G', 'A', 'B', 'C', 'D', 'E', 'Gb']\n  },\n  {\n    name: 'A minor',\n    pitches: ['A', 'B', 'C', 'D', 'E', 'F', 'G']\n  },\n  {\n    name: 'A major',\n    pitches: ['A', 'B', 'Db', 'D', 'E', 'Gb', 'Ab']\n  },\n  {\n    name: 'B minor',\n    pitches: ['B', 'Db', 'D', 'E', 'Gb', 'G', 'A']\n  },\n  {\n    name: 'B major',\n    pitches: ['B', 'Db', 'Eb', 'E', 'Gb', 'Ab', 'Bb']\n  }\n].map((scale) => {\n  scale.notes = [];\n  for (const note of NOTES) {\n    const pitch = note.substring(0, note.length - 1);\n    if (scale.pitches.includes(pitch)) {\n      scale.notes.push(note);\n    }\n  }\n  return scale;\n});","const AudioContext = window.AudioContext || window.webkitAudioContext;\nconst context = new AudioContext();\n\nexport const play = (freq, noteDuration) => {\n  if (typeof freq !== 'number' || isNaN(freq) || !freq) {\n    return;\n  }\n  noteDuration = noteDuration || 85;\n  const masterVolume = context.createGain();\n  masterVolume.gain.setValueCurveAtTime(new Float32Array([0, 0.8, 1, 0.3, 0].map(v => v * 0.05)), context.currentTime, noteDuration / 1000);\n  masterVolume.connect(context.destination);\n  const oscillator = context.createOscillator();\n  oscillator.connect(masterVolume);\n  oscillator.frequency.setValueAtTime(freq, 0);\n  oscillator.start(0);\n  setTimeout(() => oscillator.stop(), noteDuration);\n};","import { NOTE_MAP } from \"../constants/notes\";\nimport { play } from \"./audioPlayer\";\n\nexport const playScale = (dataRef, beatIndex = 0) => {\n\n  const {\n    tracks,\n    bpm,\n    notes,\n    numBeats,\n    isPlaying\n  } = dataRef.current;\n\n  if (!isPlaying) {\n    return;\n  } \n\n  for (let i = 0; i < notes.length; i++) {\n    const note = notes[i][beatIndex];\n    const freq = NOTE_MAP[note];\n    const { noteDuration, isMuted, disabledBeats } = tracks[i];\n    const isBeatDisabled = disabledBeats.includes(beatIndex);\n    if (!isMuted && !isBeatDisabled) {\n      play(freq, noteDuration);\n    }\n  }\n\n  const delay = (1 / bpm) * 60 * 1000;\n  const newBeatIndex = (beatIndex + 1) % numBeats;\n  setTimeout(() => playScale(dataRef, newBeatIndex), delay);\n};\n","\nexport const COLOR_1 = '#8338ec';\nexport const COLOR_2 = '#ff006e';\nexport const COLOR_3 = '#3a86ff';\nexport const COLOR_4 = '#fb5607';\nexport const COLOR_5 = '#ffbe0b';\n\nexport const COLORS = [\n  COLOR_1,\n  COLOR_2,\n  COLOR_3,\n  COLOR_4,\n  COLOR_5\n];\n\nexport const OPACITY_1 = 'cc';\nexport const OPACITY_2 = '66';\nexport const OPACITY_3 = '11';\n\nexport const GRAY_1 = '#666666';","import { COLORS } from '../constants/colors';\n\nconst getInitialTracks = () => {\n  return [\n    {\n      color: COLORS[0],\n      formula: 'y = sin(x)',\n      noteDuration: 80,\n      disabledBeats: [],\n      isMuted: false\n    }, \n    {\n      color: COLORS[1],\n      formula: 'y = (1 / (x + 0.5)) * cos(4 * x) - 2',\n      noteDuration: 300,\n      disabledBeats: [],\n      isMuted: false\n    }\n  ];\n}\n\nexport default getInitialTracks;","import _ from 'lodash';\nimport { LineChart, Line, Tooltip, YAxis, ResponsiveContainer, ReferenceLine } from 'recharts';\nimport formulaToData from '../../util/formulaToData';\nimport styles from './Chart.module.css';\n\nconst H = 300;\n\nconst Chart = ({\n  tracks,\n  numBeats,\n  notes,\n}) => {\n\n  const xValues = [];\n  const numXValues = numBeats * 100;\n  for (let i = 0; i < numXValues + 1; i++) {\n    xValues.push(i * (2 * Math.PI) / numXValues);\n  }\n\n  const yValuesArray = tracks\n    .map((track) => {\n      try {\n        return formulaToData(track.formula, xValues);\n      } catch (e) {\n        return [];\n      }\n    });\n\n  const data = xValues.map((x, i) => ({ x, i }));\n\n  for (let i = 0; i < yValuesArray.length; i++) {\n    const name = `Track ${i + 1}`;\n    const yValues = yValuesArray[i];\n    for (let j = 0; j < yValues.length; j++) {\n      const y = yValues[j];\n      data[j][name] = y;\n    }\n  }\n\n  const xLines = [];\n  for (let i = 0; i < numBeats + 1; i++) {\n    xLines.push(\n      <ReferenceLine\n        key={`x-line-${i}`}\n        x={i / numBeats * numXValues}\n        strokeDasharray='3 3'\n      />\n    );\n  }\n\n  const yLines = [];\n  const yMin = Math.floor(_(yValuesArray).flatten().min());\n  const yMax = Math.ceil(_(yValuesArray).flatten().max());\n  for (let i = yMin; i <= yMax; i++) {\n    yLines.push(\n      <ReferenceLine\n        key={`y-line-${i}`}\n        y={i}\n        strokeDasharray='3 3'\n      />\n    );\n  }\n\n  const formatter = (_, __,  properties) => {\n    const { dataKey, payload: { i } } = properties; \n    const trackIndex = Number(dataKey[dataKey.length - 1]) - 1;\n    const beatIndex = Math.round(i / 100);\n    return notes[trackIndex][beatIndex];\n  };\n\n  return (\n    <div className={styles.container}>\n      <ResponsiveContainer width='100%' height={H}>\n        <LineChart\n          data={data}\n        >\n          {xLines}\n          {yLines}\n          {tracks.map((track, i) => (\n            <Line\n              key={`line-${i}`}\n              type='monotone'\n              dataKey={`Track ${i + 1}`}\n              stroke={track.color}\n              opacity={track.isMuted ? 0.4 : 1}\n              dot={false}\n              strokeWidth={2}\n            />\n          ))}\n          <Tooltip\n            formatter={formatter}\n            labelFormatter={(label) => Math.round(label / 100)}\n          />\n          <YAxis domain={['dataMin', 'dataMax']} hide={true} />\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  );\n};\n\nexport default Chart;","import { useState } from 'react';\nimport { OPACITY_1 } from '../../constants/colors';\nimport styles from './TrackOptions.module.css';\nimport { FaTrash, FaVolumeMute, FaVolumeDown } from 'react-icons/fa';\n\nconst Input = ({ color, index, ...props }) => {\n  const borderColor = color;\n  const style = { borderColor };\n  return (\n    <input\n      index={index}\n      className={styles.input}\n      style={style}\n      {...props}\n    />\n  );\n};\n\nconst Inputs = ({\n  index,\n  track,\n  setTrack\n}) => {\n\n  const { formula, noteDuration } = track;\n\n  const createAttributeSetter = (attribute) => (e) => {\n    track[attribute] = e.target.value;\n    setTrack(track);\n  };\n\n  return (\n    <div className={styles.editable}>\n\n      <label className={styles.label}>Formula</label>\n      <Input\n        color={track.color}\n        index={index}\n        value={formula}\n        onChange={createAttributeSetter('formula')}\n      />\n\n      <label className={styles.label}>Note duration (ms)</label>\n      <Input\n        color={track.color}\n        index={index}\n        value={noteDuration}\n        onChange={createAttributeSetter('noteDuration')}\n        type='number'\n      />\n    </div>\n  );\n};\n\nconst Icons = ({ \n  isCollapsed,\n  index,\n  track,\n  tracks,\n  setTrack,\n  setTracks,\n}) => {\n  if (isCollapsed) {\n    return null;\n  }\n\n  const onMute = () => {\n    setTrack({\n      ...track,\n      isMuted: !track.isMuted\n    });\n  };\n\n  const onDelete = () => {\n    if (tracks.length === 1) {\n      return;\n    }\n    tracks.splice(index, 1);\n    setTracks([...tracks]);\n  };\n\n  const muteClasses = [styles.icon];\n  if (track.isMuted) {\n    muteClasses.push(styles.isMuted);\n  }\n\n  const MuteIcon = track.isMuted ? FaVolumeMute : FaVolumeDown;\n\n  return (\n    <div className={styles.icons}>\n      <div\n        onClick={onMute}\n        className={muteClasses.join(' ')}\n      >\n        <MuteIcon className={styles.muteIcon} />\n      </div>\n      <div\n        onClick={onDelete}\n        className={styles.icon}\n      >\n        <FaTrash className={styles.trashIcon} />\n      </div>\n    </div>\n  );\n};\n\nconst TrackOptions = ({\n  index,\n  track,\n  tracks,\n  setTracks,\n  setTrack\n}) => {\n\n  const [isCollapsed, setIsCollapsed] = useState(index !== 0);\n\n  const color = track.color;\n  const borderColor = color;\n  const backgroundColor = color + OPACITY_1;\n  const containerStyle = { borderColor, backgroundColor };\n  const containerClasses = [styles.container];\n  if (isCollapsed) {\n    containerClasses.push(styles.collapsed)\n  }\n\n  const onClickContainer = (e) => {\n    setIsCollapsed(!isCollapsed);\n  };\n\n  return (\n    <div\n      style={containerStyle}\n      className={containerClasses.join(' ')}\n    >\n      <div className={styles.header}>\n        <div\n          onClick={onClickContainer} \n          className={styles.title}\n        >\n          Track {index + 1}\n        </div>\n        <Icons\n          index={index}\n          isCollapsed={isCollapsed}\n          track={track}\n          tracks={tracks}\n          setTrack={setTrack}\n          setTracks={setTracks}\n        />\n      </div>\n      {isCollapsed\n        ? null\n        : <Inputs\n            track={track} \n            index={index} \n            setTrack={setTrack} \n          />\n      }\n    </div>\n  );\n};\n\nexport default TrackOptions;","import { GRAY_1, OPACITY_1 } from '../../constants/colors';\nimport styles from './LoopOptions.module.css';\n\nconst Input = (props) => {\n  const inputStyle = { borderColor: GRAY_1 };\n  return (\n    <div className={styles.inputGroup}>\n      <label className={styles.label}>\n        {props.label}\n      </label>\n      <input\n        className={styles.input}\n        style={inputStyle}\n        {...props}\n      />\n    </div>\n  );\n};\n\nconst LoopOptions = ({\n  bpm,\n  numBeats,\n  noteRange,\n  setBpm,\n  setNumBeats,\n  setNoteRange\n}) => {\n\n  const containerStyle = {\n    backgroundColor: GRAY_1 + OPACITY_1,\n    borderColor: GRAY_1,\n  };\n\n  return (\n    <div\n      className={styles.container}\n      style={containerStyle}\n    >\n      <Input\n        label='Tempo (bpm)'\n        type='number'\n        value={bpm}\n        onChange={(e) => setBpm(Number(e.target.value))}\n      />\n      <Input\n        label='Beats per measure'\n        type='number'\n        value={numBeats}\n        onChange={(e) => setNumBeats(Number(e.target.value))}\n      />\n      <Input\n        label='Note range'\n        type='number'\n        value={noteRange}\n        onChange={(e) => setNoteRange(Number(e.target.value))}\n      />\n      <Input\n        label='Low note'\n        value='D3'\n        onChange={() => null}\n        disabled\n      />\n      <Input\n        label='Scale'\n        value='D Major'\n        onChange={() => null}\n        disabled\n      />\n    </div>\n  );\n};\n\nexport default LoopOptions;","import styles from './Title.module.css';\n\nconst Title = () => {\n  return (\n    <div className={styles.container}>\n      <div className={styles.text}>\n        SCALER\n      </div>\n      <div className={styles.line} />\n      <a \n        className={styles.link} \n        href='https://github.com/alexcrist/scaler'\n        target='_'  \n      >\n        see the code\n      </a>\n    </div>\n  );\n};\n\nexport default Title;","import styles from './TimelineArm.module.css';\n\nconst TimelineArm = ({ isPlaying, bpm, numBeats }) => {\n\n  const periodDuration = Math.round(numBeats / bpm * 60 * 1000);\n\n  const timelineArmStyle = isPlaying \n    ? { animationDuration: `${periodDuration}ms` }\n    : { animation: 'none', display: 'none' };\n\n  return (\n    <div \n      className={styles.arm}\n      style={timelineArmStyle}\n    ></div>\n  );\n};\n\nexport default TimelineArm;","import { OPACITY_1 } from '../../constants/colors';\nimport styles from './EnabledNotes.module.css';\n\nconst EnabledNotes = ({ numBeats, track, setTrack }) => {\n\n  if (!track) {\n    return null;\n  }\n\n  const { color } = track;\n  const buttonStyle = {\n    backgroundColor: color + OPACITY_1,\n    borderColor: color\n  };\n\n  const buttons = [];\n  for (let i = 0; i < numBeats; i++) {\n\n    const onClick = () => {\n      let wasEnabled = true;\n      for (let j = 0; j < track.disabledBeats.length; j++) {\n        if (i === track.disabledBeats[j]) {\n          track.disabledBeats.splice(j, 1);\n          wasEnabled = false;\n        }\n      }\n      if (wasEnabled) {\n        track.disabledBeats.push(i);\n      }\n      setTrack({ ...track });\n    };\n\n    const buttonClasses = [styles.button];\n    if (track.disabledBeats.includes(i)) {\n      buttonClasses.push(styles.disabled);\n    }\n\n    buttons.push(\n      <div\n        key={i}\n        onClick={onClick}\n        style={buttonStyle}\n        className={buttonClasses.join(' ')}\n      />\n    );\n  }\n\n  const buttonsClasses = [styles.buttons];\n  if (track.isMuted) {\n    buttonsClasses.push(styles.muted);\n  }\n\n  return (\n    <div className={buttonsClasses.join(' ')}>\n      {buttons}\n    </div>\n  )\n};\n\nexport default EnabledNotes;","import { COLORS, GRAY_1, OPACITY_1 } from '../../constants/colors';\nimport styles from './AddTrack.module.css';\n\nconst AddTrack = ({ tracks, setTracks }) => {\n\n  const addTrack = () => {\n    const lastColor = tracks[tracks.length - 1].color;\n    const lastColorIndex = COLORS.indexOf(lastColor);\n    const newColorIndex = (lastColorIndex + 1) % COLORS.length;\n    const newColor = COLORS[newColorIndex];\n    const newTrack = {\n      color: newColor,\n      formula: 'y = 0',\n      noteDuration: 100,\n      disabledBeats: [],\n      isMuted: false\n    };\n    setTracks([...tracks, newTrack]);\n  };\n\n  return (\n    <div\n      onClick={addTrack}\n      className={styles.createTrack}\n      style={{\n        borderColor: GRAY_1,\n        backgroundColor: GRAY_1 + OPACITY_1,\n      }}\n    >\n      <div className={styles.createTrackText}>\n        Add track\n      </div>\n    </div>\n  );\n};\n\nexport default AddTrack;","import styles from './Play.module.css';\n\nconst Play = ({ isPlaying, setIsPlaying }) => {\n\n  const text = isPlaying ? 'Stop' : 'Play';\n  const playStyle = isPlaying\n    ? {\n      borderColor: '#980031',\n      backgroundColor: '#98003199'\n    }\n    : {\n      borderColor: '#489900',\n      backgroundColor: '#48990099'\n    };\n\n\n  const onPlay = () => {\n    setIsPlaying(!isPlaying);\n  };\n\n  return (\n    <div\n      onClick={onPlay}\n      className={styles.play}\n      style={playStyle}\n    >\n      <div className={styles.playText}>{text}</div>\n    </div>\n  );\n};\n\n\nexport default Play;","import _ from 'lodash';\nimport { useState, useEffect, useRef, useMemo } from 'react';\nimport { calculateNotes } from '../../util/noteCalculator';\nimport { SCALES } from '../../constants/scales';\nimport { playScale } from '../../util/scalePlayer';\nimport getInitialTracks from '../../util/getInitialTracks';\nimport styles from './App.module.css';\nimport Chart from '../Chart/Chart.js';\nimport TrackOptions from '../TrackOptions/TrackOptions.js';\nimport LoopOptions from '../LoopOptions/LoopOptions';\nimport Title from '../Title/Title';\nimport TimelineArm from '../TimelineArm/TimelineArm';\nimport EnabledNotes from '../EnabledNotes/EnabledNotes';\nimport AddTrack from '../AddTrack/AddTrack';\nimport Play from '../Play/Play';\n\nconst scale = SCALES[2];\nconst lowNote = 'D3';\n\nconst App = () => {\n\n  const [tracks, setTracks] = useState([]);\n  const [bpm, setBpm] = useState(120);\n  const [numBeats, setNumBeats] = useState(8);\n  const [noteRange, setNoteRange] = useState(14);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  // Calculate notes to play ===================================================\n\n  const notes = useMemo(() => {\n    return calculateNotes(\n      tracks,\n      numBeats,\n      noteRange,\n      scale,\n      lowNote\n    );\n  }, [tracks, numBeats, noteRange]);\n\n  // Ref for scale player data =================================================\n\n  const scalePlayerData = useRef({\n    tracks,\n    bpm,\n    notes,\n    numBeats,\n    isPlaying\n  });\n  useEffect(() => {\n    scalePlayerData.current = {\n      tracks,\n      bpm,\n      notes,\n      numBeats,\n      isPlaying,\n    };\n  }, [tracks, bpm, notes, numBeats, isPlaying]);\n\n  // On page load ==============================================================\n\n  useEffect(() => { setTracks(getInitialTracks()); }, []);\n\n  // Play and pause scale player ===============================================\n\n  useEffect(() => {\n    if (isPlaying) {\n      playScale(scalePlayerData);\n    }\n  }, [isPlaying]);\n\n  // Page content ==============================================================\n\n  const createSetTrack = (index) => (track) => {\n    const newTracks = _.cloneDeep(tracks);\n    newTracks[index] = track;\n    setTracks(newTracks);\n  };\n\n  return (\n    <div className={styles.app}>\n      <Title />\n      <div className={styles.row}>\n        <div className={styles.left}>\n          <div className={styles.chart}>\n            <Chart\n              tracks={tracks}\n              numBeats={numBeats}\n              notes={notes}\n            />\n            <TimelineArm\n              isPlaying={isPlaying}\n              bpm={bpm}\n              numBeats={numBeats}\n            />\n          </div>\n          {tracks.map((track, index) => (\n            <EnabledNotes\n              key={index}\n              numBeats={numBeats}\n              track={track}\n              setTrack={createSetTrack(index)}\n            />\n          ))}\n\n        </div>\n\n        <div className={styles.right}>\n          <div className={styles.buttons}>\n            <Play\n              isPlaying={isPlaying}\n              setIsPlaying={setIsPlaying}\n            />\n            <AddTrack\n              tracks={tracks}\n              setTracks={setTracks}\n            />\n          </div>\n          {tracks.map((track, index) => (\n            <TrackOptions\n              key={index}\n              index={index}\n              track={track}\n              tracks={tracks}\n              setTrack={createSetTrack(index)}\n              setTracks={setTracks}\n            />\n          ))}\n        </div>\n      </div>\n\n      <LoopOptions\n        isPlaying={isPlaying}\n        bpm={bpm}\n        numBeats={numBeats}\n        noteRange={noteRange}\n        setIsPlaying={setIsPlaying}\n        setBpm={setBpm}\n        setNumBeats={setNumBeats}\n        setNoteRange={setNoteRange}\n      />\n    </div>\n  )\n}\n\nexport default App;","import _ from 'lodash';\nimport formulaToData from './formulaToData';\n\nexport const calculateNotes = (\n  tracks,\n  numBeats,\n  noteRange,\n  scale,\n  lowNote\n) => {\n  const minNoteIndex = scale.notes.indexOf(lowNote);\n\n  const xValues = [];\n  for (let i = 0; i < numBeats; i++) {\n    xValues.push(i / numBeats * 2 * Math.PI);\n  }\n\n  const yValuesArray = tracks.map(({ formula }) => {\n    try {\n      return formulaToData(formula, xValues);\n    } catch (e) {\n      return [];\n    }\n  });\n\n  const yMin = _(yValuesArray).flatten().min();\n  const yMax = _(yValuesArray).flatten().max();\n\n  const notesArray = yValuesArray.map((yValues) => {\n\n    const noteIndices = yValues.map((y) => {\n      return Math.round(\n        (y - yMin) / \n        ((yMax - yMin) || 1) *\n        (noteRange - 1)\n      );\n    });\n\n    const notes = noteIndices.map((index) => {\n      return scale.notes[index + minNoteIndex];\n    });\n\n    return notes;\n  });\n\n  return notesArray;\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1IksY\",\"row\":\"App_row__2IEL-\",\"left\":\"App_left__1u-q5\",\"chart\":\"App_chart__1PrK6\",\"right\":\"App_right__3pQWj\",\"buttons\":\"App_buttons__22Fcg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoopOptions_container__1J57F\",\"inputGroup\":\"LoopOptions_inputGroup__18R54\",\"label\":\"LoopOptions_label__2B8FD\",\"input\":\"LoopOptions_input__19Sav\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Title_container__e3k5b\",\"text\":\"Title_text__39Uar\",\"link\":\"Title_link__2onV0\",\"line\":\"Title_line__1RmyE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"EnabledNotes_buttons__YuCJP\",\"muted\":\"EnabledNotes_muted__2I7zC\",\"button\":\"EnabledNotes_button__3316l\",\"disabled\":\"EnabledNotes_disabled__1W2ff\"};"],"sourceRoot":""}